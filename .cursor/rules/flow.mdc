---
description: 
globs: 
alwaysApply: false
---
修改后的架构仍然保留了agent作为planner进行智能决策的能力，只是增强了执行效率。
修改后的系统工作在两个层面：
智能规划层面 - Agent (LLM)仍然负责：
理解用户需求和上下文
决定高层次策略和工具使用顺序
分析工具结果并做出决策
处理复杂情况和异常


自动执行层面 - EnhancedAgentExecutor提供：
自动工具链接，减少重复提示LLM的需要
预定义的工作流（如截图分析→代码生成→应用补丁）
数据格式转换和传递
主要区别是，对于某些常见且明确的工作流程，修改后的系统不再需要让LLM在每个步骤之间做决定，从而减少了往返次数和延迟。LLM仍然保持对整体过程的控制，并可以随时介入决策。

ThreeJsAgentOutputParser中的_nextTool机制只是一个建议而非强制执行，LLM可以选择不指定下一个工具，保持完全控制权。这种方法平衡了效率和灵活性。